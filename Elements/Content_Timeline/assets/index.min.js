/*=======Content Timeline=========*/
var SaElcontentTimelineHandler = function($scope, $) {
    var contentBlock = $(".sa-el-content-timeline-block");

    $(window).on("scroll", function() {
        contentBlock.each(function() {
            if ($(this).find(".highlight")) {

                var lineEnd =
                    contentBlock.height() * 0.15 + window.innerHeight / 2;
                var topOffset = $(this).offset().top;
                var lineHeight = window.scrollY + lineEnd * 1.3 - topOffset;

                $(this)
                    .find(".sa-el-content-timeline-inner")
                    .css("height", lineHeight + "px");
            }
        });

        if (this.oldScroll > this.scrollY == false) {
            this.oldScroll = this.scrollY;

            $(".sa-el-content-timeline-block.highlight")
                .prev()
                .find(".sa-el-content-timeline-inner")
                .removeClass("sa-el-muted")
                .addClass("sa-el-highlighted");
        } else if (this.oldScroll > this.scrollY == true) {
            this.oldScroll = this.scrollY;

            $(".sa-el-content-timeline-block.highlight")
                .find(".sa-el-content-timeline-inner")
                .addClass("sa-el-prev-highlighted");
            $(".sa-el-content-timeline-block.highlight")
                .next()
                .find(".sa-el-content-timeline-inner")
                .removeClass("sa-el-highlighted")
                .removeClass("sa-el-prev-highlighted")
                .addClass("sa-el-muted");
        }
    });
};

jQuery(window).on("elementor/frontend/init", function() {
    elementorFrontend.hooks.addAction(
        "frontend/element_ready/sa_el_content_timeline.default",
        SaElcontentTimelineHandler
    );
});