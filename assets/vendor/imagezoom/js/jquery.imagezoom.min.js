!function(e,o){e.ImageZoom=function(t,i){function s(e){var o=parseInt(e);return isNaN(o)?0:o}var n=this;n.$el=e(t),n.$el.data("imagezoom",n),n.init=function(o){n.options=e.extend({},e.ImageZoom.defaults,o),n.$viewer=e('<div class="zm-viewer '+n.options.zoomViewerClass+'"></div>').appendTo("body"),n.$handler=e('<div class="zm-handler'+n.options.zoomHandlerClass+'"></div>').appendTo("body"),n.isBigImageReady=-1,n.$largeImg=null,n.isActive=!1,n.$handlerArea=null,n.isWebkit=/chrome/.test(navigator.userAgent.toLowerCase())||/safari/.test(navigator.userAgent.toLowerCase()),n.evt={x:-1,y:-1},n.options.bigImageSrc=""==n.options.bigImageSrc?n.$el.attr("src"):n.options.bigImageSrc,(new Image).src=n.options.bigImageSrc,n.callIndex=e.ImageZoom._calltimes+1,n.animateTimer=null,e.ImageZoom._calltimes+=1,e(document).bind("mousemove.imagezoom"+n.callIndex,function(e){n.isActive&&n.moveHandler(e.pageX,e.pageY)}),n.$el.bind("mouseover.imagezoom",function(e){n.isActive=!0,n.showViewer(e)})},n.moveHandler=function(e,t){var i,a,r,l,h,m,d,g,p=n.$el.offset(),c=n.$el.outerWidth(!1),f=n.$el.outerHeight(!1);e>=p.left&&e<=p.left+c&&t>=p.top&&t<=p.top+f?(p.left=p.left+s(n.$el.css("borderLeftWidth"))+s(n.$el.css("paddingLeft")),p.top=p.top+s(n.$el.css("borderTopWidth"))+s(n.$el.css("paddingTop")),c=n.$el.width(),f=n.$el.height(),e>=p.left&&e<=p.left+c&&t>=p.top&&t<=p.top+f&&(n.evt={x:e,y:t},"follow"==n.options.type&&n.$viewer.css({top:t-n.$viewer.outerHeight()/2,left:e-n.$viewer.outerWidth()/2}),1==n.isBigImageReady&&(r=t-p.top,l=e-p.left,"inner"==n.options.type?(i=-n.$largeImg.height()*r/f+r,a=-n.$largeImg.width()*l/c+l):"standard"==n.options.type?(h=l-n.$handlerArea.width()/2,m=r-n.$handlerArea.height()/2,d=n.$handlerArea.width(),g=n.$handlerArea.height(),0>h?h=0:h>c-d&&(h=c-d),0>m?m=0:m>f-g&&(m=f-g),a=-h/n.scale,i=-m/n.scale,n.isWebkit?(n.$handlerArea.css({opacity:.99}),setTimeout(function(){n.$handlerArea.css({top:m,left:h,opacity:1})},0)):n.$handlerArea.css({top:m,left:h})):"follow"==n.options.type&&(i=-n.$largeImg.height()/f*r+n.options.zoomSize[1]/2,a=-n.$largeImg.width()/c*l+n.options.zoomSize[0]/2,-i>n.$largeImg.height()-n.options.zoomSize[1]?i=-(n.$largeImg.height()-n.options.zoomSize[1]):i>0&&(i=0),-a>n.$largeImg.width()-n.options.zoomSize[0]?a=-(n.$largeImg.width()-n.options.zoomSize[0]):a>0&&(a=0)),n.options.smoothMove?(o.clearTimeout(n.animateTimer),n.smoothMove(a,i)):n.$viewer.find("img").css({top:i,left:a})))):(n.isActive=!1,n.$viewer.hide(),n.$handler.hide(),n.options.onHide(n),o.clearTimeout(n.animateTimer),n.animateTimer=null)},n.showViewer=function(o){var t,i,a,r,l,h=n.$el.offset().top,m=s(n.$el.css("borderTopWidth")),d=s(n.$el.css("paddingTop")),g=n.$el.offset().left;h=h+m+d,g=g+s(n.$el.css("borderLeftWidth"))+s(n.$el.css("paddingLeft")),t=n.$el.width(),i=n.$el.height(),n.isBigImageReady<1&&e("div",n.$viewer).remove(),"inner"==n.options.type?n.$viewer.css({top:h,left:g,width:t,height:i}).show():"standard"==n.options.type?(a=""==n.options.alignTo?n.$el:e("#"+n.options.alignTo),"left"==n.options.position?(r=a.offset().left-n.options.zoomSize[0]-n.options.offset[0],l=a.offset().top+n.options.offset[1]):"right"==n.options.position&&(r=a.offset().left+a.width()+n.options.offset[0],l=a.offset().top+n.options.offset[1]),n.$viewer.css({top:l,left:r,width:n.options.zoomSize[0],height:n.options.zoomSize[1]}).show(),n.$handlerArea&&(n.scale=t/n.$largeImg.width(),n.$handlerArea.css({width:n.$viewer.width()*n.scale,height:n.$viewer.height()*n.scale}))):"follow"==n.options.type&&n.$viewer.css({width:n.options.zoomSize[0],height:n.options.zoomSize[1],top:o.pageY-n.options.zoomSize[1]/2,left:o.pageX-n.options.zoomSize[0]/2}).show(),n.$handler.css({top:h,left:g,width:t,height:i}).show(),n.options.onShow(n),-1==n.isBigImageReady&&(n.isBigImageReady=0,fastImg(n.options.bigImageSrc,function(){if(e.trim(e(this).attr("src"))==e.trim(n.options.bigImageSrc)){if(n.$viewer.append('<img src="'+n.$el.attr("src")+'" class="zm-fast" style="position:absolute;width:'+this.width+"px;height:"+this.height+'px">'),n.isBigImageReady=1,n.$largeImg=e('<img src="'+n.options.bigImageSrc+'" style="position:absolute;width:'+this.width+"px;height:"+this.height+'px">'),n.$viewer.append(n.$largeImg),"standard"==n.options.type){var i=t/this.width;n.$handlerArea=e('<div class="zm-handlerarea" style="width:'+n.$viewer.width()*i+"px;height:"+n.$viewer.height()*i+'px"></div>').appendTo(n.$handler),n.scale=i}-1==n.evt.x&&-1==n.evt.y?n.moveHandler(o.pageX,o.pageY):n.moveHandler(n.evt.x,n.evt.y),n.options.showDescription&&n.$el.attr("alt")&&""!=e.trim(n.$el.attr("alt"))&&n.$viewer.append('<div class="'+n.options.descriptionClass+'">'+n.$el.attr("alt")+"</div>")}},function(){},function(){}))},n.changeImage=function(e,o){this.$el.attr("src",e),this.isBigImageReady=-1,this.options.bigImageSrc="string"==typeof o?o:e,n.options.preload&&((new Image).src=this.options.bigImageSrc),this.$viewer.hide().empty(),this.$handler.hide().empty(),this.$handlerArea=null},n.changeZoomSize=function(e,o){n.options.zoomSize=[e,o]},n.destroy=function(){e(document).unbind("mousemove.imagezoom"+n.callIndex),this.$el.unbind(".imagezoom"),this.$viewer.remove(),this.$handler.remove(),this.$el.removeData("imagezoom")},n.smoothMove=function(e,t){var i,s,a,r,l,h=parseInt(n.$largeImg.css("top"));return h=isNaN(h)?0:h,i=parseInt(n.$largeImg.css("left")),i=isNaN(i)?0:i,t=parseInt(t),e=parseInt(e),h==t&&i==e?(o.clearTimeout(n.animateTimer),void(n.animateTimer=null)):(a=e-i,r=h+(s=t-h)/Math.abs(s)*Math.ceil(Math.abs(s/10)),l=i+a/Math.abs(a)*Math.ceil(Math.abs(a/10)),n.$viewer.find("img").css({top:r,left:l}),void(n.animateTimer=setTimeout(function(){n.smoothMove(e,t)},10)))},n.init(i)},e.ImageZoom.defaults={bigImageSrc:"",preload:!0,type:"inner",smoothMove:!0,position:"right",offset:[10,0],alignTo:"",zoomSize:[100,100],descriptionClass:"zm-description",zoomViewerClass:"",zoomHandlerClass:"",showDescription:!0,onShow:function(){},onHide:function(){}},e.ImageZoom._calltimes=0,e.fn.ImageZoom=function(o){return this.each(function(){new e.ImageZoom(this,o)})}}(jQuery,window);var fastImg=function(){var e=[],o=null,t=function(){for(var o=0;o<e.length;o++)e[o].end?e.splice(o--,1):e[o]();!e.length&&i()},i=function(){clearInterval(o),o=null};return function(i,s,n,a){var r,l,h,m,d,g=new Image;return g.src=i,g.complete?(s.call(g),void(n&&n.call(g))):(l=g.width,h=g.height,g.onerror=function(){a&&a.call(g),r.end=!0,g=g.onload=g.onerror=null},(r=function(){m=g.width,d=g.height,(m!==l||d!==h||m*d>1024)&&(s.call(g),r.end=!0)})(),g.onload=function(){!r.end&&r(),n&&n.call(g),g=g.onload=g.onerror=null},void(r.end||(e.push(r),null===o&&(o=setInterval(t,40)))))}}();